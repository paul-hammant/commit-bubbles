{
  "when": "2012-04-16T03:52:07-04:00", 
  "message": "comitting patch for SYNAPSE-863", 
  "who": "uswick", 
  "changes": [
    {
      "chunks": [
        {
          "locn": "-17,5 +17,72", 
          "lines": [
            " */\n", 
            " package org.apache.synapse.config.xml;\n", 
            " \n", 
            "+import org.apache.axiom.om.OMAbstractFactory;\n", 
            "+import org.apache.axiom.om.OMElement;\n", 
            "+import org.apache.axiom.om.OMFactory;\n", 
            "+import org.apache.axiom.om.OMNamespace;\n", 
            "+import org.apache.commons.logging.Log;\n", 
            "+import org.apache.synapse.SynapseConstants;\n", 
            "+import org.apache.synapse.SynapseException;\n", 
            "+import org.apache.synapse.libraries.imports.SynapseImport;\n", 
            "+import org.apache.commons.logging.LogFactory;\n", 
            "+\n", 
            "+/**\n", 
            "+ * This will serialize the SynapseImport to the xml configuration as specified bellow\n", 
            "+ * <p/>\n", 
            "+ * <pre>\n", 
            "+ * &lt;import [xmlns=\"http://ws.apache.org/ns/synapse\"] [name=\"string\"] [package=\"string\"]&gt;\n", 
            "+ * </pre>\n", 
            "+ */\n", 
            "+\n", 
            " public class SynapseImportSerializer {\n", 
            "+\n", 
            "+    private static final Log log = LogFactory.getLog(SynapseImportSerializer.class);\n", 
            "+\n", 
            "+    protected static final OMFactory fac = OMAbstractFactory.getOMFactory();\n", 
            "+    protected static final OMNamespace synNS = SynapseConstants.SYNAPSE_OMNAMESPACE;\n", 
            "+    protected static final OMNamespace nullNS = fac.createOMNamespace(XMLConfigConstants.NULL_NAMESPACE, \"\");\n", 
            "+\n", 
            "+\n", 
            "+    /**\n", 
            "+     * This method will implements the serialization of SynapseImport object to its configuration\n", 
            "+     *\n", 
            "+     * @param s the type SynapseImport which is subjected to the serialization\n", 
            "+     * @return OMElement serialized in to xml from the given parameters\n", 
            "+     */\n", 
            "+    public OMElement serializeImport(SynapseImport s) {\n", 
            "+\n", 
            "+\n", 
            "+        if (!(s instanceof SynapseImport)) {\n", 
            "+            handleException(\"Unsupported Synapse Import passed in for serialization\");\n", 
            "+        }\n", 
            "+\n", 
            "+        SynapseImport synapseImport = (SynapseImport) s;\n", 
            "+\n", 
            "+        OMElement importElem = fac.createOMElement(\"import\", synNS);\n", 
            "+\n", 
            "+        if (synapseImport.getLibName() != null) {\n", 
            "+            importElem.addAttribute(fac.createOMAttribute(\n", 
            "+                    \"name\", nullNS, s.getLibName()));\n", 
            "+        } else {\n", 
            "+            handleException(\"Invalid Synapse Import. Target Library name is required\");\n", 
            "+        }\n", 
            "+\n", 
            "+        if (synapseImport.getLibPackage() != null) {\n", 
            "+            importElem.addAttribute(fac.createOMAttribute(\n", 
            "+                    \"package\", nullNS, s.getLibPackage()));\n", 
            "+        } else {\n", 
            "+            handleException(\"Invalid Synapse Import. Target Library package is required\");\n", 
            "+        }\n", 
            "+\n", 
            "+        return importElem;\n", 
            "+\n", 
            "+    }\n", 
            "+\n", 
            "+    private void handleException(String msg) {\n", 
            "+        log.error(msg);\n", 
            "+        throw new SynapseException(msg);\n", 
            "+    }\n", 
            "+\n", 
            "+\n", 
            " }\n"
          ]
        }
      ], 
      "to": "java/modules/core/src/main/java/org/apache/synapse/config/xml/SynapseImportSerializer.java", 
      "from": "java/modules/core/src/main/java/org/apache/synapse/config/xml/SynapseImportSerializer.java"
    }
  ], 
  "id": "1326522"
}